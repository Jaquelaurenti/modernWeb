{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/app/_boot.js","webpack:///./js/app/controllers/NegociacaoController.js","webpack:///./js/app/models/ListaNegociacoes.js","webpack:///./js/app/models/Mensagem.js","webpack:///./js/app/views/NegociacoesView.js","webpack:///./js/app/views/View.js","webpack:///./js/app/helpers/DateHelper.js","webpack:///./js/app/views/MensagemView.js","webpack:///./js/app/services/NegociacaoService.js","webpack:///./js/app/services/HttpService.js","webpack:///./js/app/models/Negociacao.js"],"names":["negociacaoController","NegociacaoController","document","querySelector","onsubmit","adiciona","bind","onclick","apaga","importaNegociacoes","$","_inputData","_inputQuantidade","_inputValor","_listaNegociacoes","ListaNegociacoes","_negociacoesView","NegociacoesView","update","_mensagem","Mensagem","_mensagemView","MensagemView","event","preventDefault","_criaNegociacao","texto","_limpaFormulario","Negociacao","DateHelper","textoParaData","value","focus","esvazia","service","NegociacaoService","obterNegociacoes","then","negociacoes","forEach","negociacao","erro","_negociacoes","push","concat","_texto","elemento","model","map","n","dataParaTexto","data","quantidade","valor","volume","join","reduce","total","View","_elemento","Error","innerHTML","template","getDate","getMonth","getFullYear","test","Date","split","item","index","_http","HttpService","Promise","resolve","reject","get","objeto","all","obterNegociacoesDaSemana","obterNegociacoesAnterior","obterNegociacoesRetrasada","periodo","arrayAchatado","array","url","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","JSON","parse","responseText","send","_data","_quantidade","_valor","Object","freeze"],"mappings":"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","file":"_boot.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { NegociacaoController } from './controllers/NegociacaoController';\r\nlet negociacaoController = new NegociacaoController();\r\n\r\ndocument.querySelector('.form').onsubmit = negociacaoController.adiciona.bind(negociacaoController);\r\ndocument.querySelector('#apaga-negociacoes-btn').onclick = negociacaoController.apaga.bind(negociacaoController);\r\ndocument.querySelector('#importa-negociacoes-btn').onclick = negociacaoController.importaNegociacoes.bind(negociacaoController);","import { ListaNegociacoes } from '../models/ListaNegociacoes';\r\nimport { Mensagem } from '../models/Mensagem';\r\nimport { NegociacoesView } from '../views/NegociacoesView';\r\nimport { MensagemView } from '../views/MensagemView';\r\nimport { NegociacaoService } from '../services/NegociacaoService';\r\nimport { DateHelper } from '../helpers/DateHelper';\r\nimport { Negociacao } from '../models/Negociacao';\r\n\r\nexport class NegociacaoController {\r\n    constructor() {\r\n\r\n        let $ = document.querySelector.bind(document);\r\n        this._inputData = $('#data');\r\n        this._inputQuantidade = $('#quantidade');\r\n        this._inputValor = $('#valor');\r\n        this._listaNegociacoes = new ListaNegociacoes();\r\n\r\n        this._negociacoesView = new NegociacoesView($('#negociacoesView'));\r\n        this._negociacoesView.update(this._listaNegociacoes);\r\n\r\n        this._mensagem = new Mensagem();\r\n        this._mensagemView = new MensagemView($('#mensagemView'));\r\n        this._mensagemView.update(this._mensagem);\r\n\r\n    }\r\n\r\n    adiciona(event) {\r\n\r\n        event.preventDefault();\r\n        this._listaNegociacoes.adiciona(this._criaNegociacao());\r\n        this._negociacoesView.update(this._listaNegociacoes);\r\n\r\n        this._mensagem.texto = 'Negociação adicionada com sucesso';\r\n        this._mensagemView.update(this._mensagem);\r\n\r\n        this._limpaFormulario();\r\n    }\r\n\r\n    _criaNegociacao() {\r\n\r\n        return new Negociacao(\r\n            DateHelper.textoParaData(this._inputData.value),\r\n            this._inputQuantidade.value,\r\n            this._inputValor.value);\r\n    }\r\n\r\n    _limpaFormulario() {\r\n\r\n        this._inputData.value = '';\r\n        this._inputQuantidade.value = 1;\r\n        this._inputValor.value = 1.0;\r\n        this._inputData.focus();\r\n    }\r\n\r\n    apaga() {\r\n        this._listaNegociacoes.esvazia();\r\n        this._negociacoesView.update(this._listaNegociacoes);\r\n        this._mensagem.texto = 'Negociações apagadas com sucesso';\r\n        this._mensagemView.update(this._mensagem);\r\n    }\r\n\r\n    importaNegociacoes() {\r\n        let service = new NegociacaoService();\r\n\r\n        service.obterNegociacoes()\r\n        .then(negociacoes => {\r\n            negociacoes\r\n                .forEach(negociacao =>\r\n                    this._listaNegociacoes.adiciona(negociacao));\r\n\r\n            this._negociacoesView.update(this._listaNegociacoes);\r\n            this._mensagem.texto = 'Negociações importadas com  sucesso';\r\n            this._mensagemView.update(this._mensagem);\r\n        })\r\n            .catch(erro => {\r\n                this._mensagem.texto = erro;\r\n                this._mensagemView.update(this._mensagem);\r\n                return;\r\n            });\r\n    }\r\n}","export class ListaNegociacoes {\r\n    \r\n    constructor() {\r\n        this._negociacoes = [];\r\n    }\r\n    \r\n    adiciona(negociacao) {\r\n        this._negociacoes.push(negociacao);\r\n    }\r\n    \r\n    get negociacoes() {\r\n        //retorna um novo array para evitar acesso externo\r\n        return [].concat(this._negociacoes);\r\n    }\r\n\r\n    esvazia() {\r\n        this._negociacoes = [];\r\n       }\r\n}","export class Mensagem {\r\n    constructor(texto = '') {\r\n        this._texto = texto;\r\n    }\r\n\r\n    get texto() {\r\n        return this._texto;\r\n    }\r\n\r\n    set texto(texto) {\r\n        this._texto = texto;\r\n    }\r\n}","import { View } from './View';\r\nimport { DateHelper } from '../helpers/DateHelper';\r\n\r\nexport class NegociacoesView extends View {\r\n\r\n    constructor(elemento) {\r\n        super(elemento);\r\n    }\r\n\r\n    template(model) {\r\n\r\n        return `\r\n        <table class=\"table table-hover table-bordered\">\r\n            <thead>\r\n                <tr>\r\n                    <th>Data</th>\r\n                    <th>Quantidade</th>\r\n                    <th>Valor R$</th>\r\n                    <th>Volume R$</th>\r\n                </tr>\r\n            </thead>\r\n        \r\n            <tbody>\r\n                ${model.negociacoes.map(n => `\r\n                    \r\n                    <tr>\r\n                        <td>${DateHelper.dataParaTexto(n.data)}</td>\r\n                        <td>${n.quantidade}</td>\r\n                        <td>${n.valor}</td>\r\n                        <td>${n.volume}</td>\r\n                    </tr>\r\n                    \r\n                `).join('')}                \r\n            </tbody>\r\n                  \r\n            <tfoot>\r\n                <td colspan=\"3\"></td>\r\n                <td>\r\n                    ${model.negociacoes.reduce((total, n) => total + n.volume, 0.0)}\r\n                </td>\r\n            </tfoot>\r\n            \r\n        </table>\r\n        `;\r\n    }\r\n}","export class View {\r\n    \r\n    constructor(elemento) {\r\n        this._elemento = elemento;\r\n    }\r\n    \r\n    template() {\r\n        throw new Error('O método template deve ser implementado');\r\n    }\r\n    \r\n    update(model) {\r\n        this._elemento.innerHTML = this.template(model);\r\n    }\r\n}","export class DateHelper {\r\n    constructor() {\r\n        throw new Error('Esta classe não pode ser instânciada');\r\n    }\r\n    \r\n    static dataParaTexto(data) {\r\n        return `${data.getDate()}/${data.getMonth() + 1}/${data.getFullYear()}`;\r\n    }\r\n    \r\n    static textoParaData(texto) {\r\n        if (!/\\d{4}-\\d{2}-\\d{2}/.test(texto))\r\n            throw new Error('Deve estar no formato aaaa-mm-dd');\r\n\r\n        return new Date(\r\n            ...texto\r\n            .split('-')\r\n            .map(\r\n                (item, index) => item - index % 2)\r\n        );\r\n    }\r\n}\r\n","  \r\nimport { View } from './View';\r\n\r\nexport class MensagemView extends View {\r\n    \r\n    constructor(elemento) {\r\n       super(elemento);\r\n    }\r\n    \r\n   template(model) {\r\n       \r\n       return model.texto ? `<p class=\"alert alert-info\">${model.texto}</p>` : '<p></p>';\r\n   }\r\n}","import { HttpService } from './HttpService';\r\nimport { Negociacao } from '../models/Negociacao';\r\n\r\nexport class NegociacaoService {\r\n\r\n    constructor() {\r\n        this._http = new HttpService();\r\n    }\r\n\r\n    obterNegociacoesDaSemana() {\r\n        return new Promise((resolve, reject) => {\r\n            this._http\r\n                .get('http://localhost:3000/negociacoes/semana')\r\n                .then(negociacoes => {\r\n                    resolve(\r\n                        negociacoes.map(objeto => new Negociacao(\r\n                            new Date(objeto.data), objeto.quantidade, objeto.valor))\r\n                    )\r\n                })\r\n                .catch(erro => {\r\n                    reject('Não foi possível obter as negociações da semana')\r\n                })\r\n        })\r\n    }\r\n\r\n    obterNegociacoesAnterior() {\r\n        return new Promise((resolve, reject) => {\r\n            this._http\r\n                .get('http://localhost:3000/negociacoes/anterior')\r\n                .then(negociacoes => {\r\n                    resolve(\r\n                        negociacoes.map(objeto => new Negociacao(\r\n                            new Date(objeto.data), objeto.quantidade, objeto.valor))\r\n                    )\r\n                })\r\n                .catch(erro => {\r\n                    reject('Não foi possível obter as negociações da semana anterior')\r\n                })\r\n        })\r\n    }\r\n\r\n    obterNegociacoesRetrasada() {\r\n        return new Promise((resolve, reject) => {\r\n            this._http\r\n                .get('http://localhost:3000/negociacoes/retrasada')\r\n                .then(negociacoes => {\r\n                    resolve(\r\n                        negociacoes.map(objeto => new Negociacao(\r\n                            new Date(objeto.data), objeto.quantidade, objeto.valor))\r\n                    )\r\n                })\r\n                .catch(erro => {\r\n                    reject('Não foi possível obter as negociações da semana retrasada')\r\n                })\r\n        })\r\n    }\r\n\r\n    obterNegociacoes() {\r\n        return new Promise((resolve, reject) => {\r\n            Promise.all([\r\n                this.obterNegociacoesDaSemana(),\r\n                this.obterNegociacoesAnterior(),\r\n                this.obterNegociacoesRetrasada()\r\n            ]).then(periodo => {\r\n                let negociacoes  = periodo\r\n                    .reduce((arrayAchatado, array) => arrayAchatado.concat(array), [])\r\n                    .map(objeto => new Negociacao(\r\n                        new Date(objeto.data), objeto.quantidade, objeto.valor));\r\n                resolve(negociacoes);\r\n            })\r\n                .catch(erro => {\r\n                    reject(erro);\r\n                });\r\n        })\r\n    }\r\n}","export class HttpService {\r\n    get(url) {\r\n        return new Promise((resolve, reject) => {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.open(\"GET\", url);\r\n            xhr.onreadystatechange = () => {\r\n                if (xhr.readyState == 4) {\r\n                    if (xhr.status == 200) {\r\n                        resolve(JSON.parse(xhr.responseText));\r\n                    } else {\r\n                        reject(xhr.responseText);\r\n                    }\r\n                }\r\n            };\r\n            xhr.send();\r\n        });\r\n    }\r\n}\r\n","export class Negociacao {\r\n\r\n    constructor(data, quantidade, valor) {\r\n        this._data = new Date(data);\r\n        this._quantidade = quantidade;\r\n        this._valor = valor;\r\n        Object.freeze(this);\r\n    }\r\n\r\n    get volume() {\r\n        return this._quantidade * this._valor;\r\n    }\r\n\r\n    get data() {\r\n        return new Date(this._data);\r\n    }\r\n\r\n    get quantidade() {\r\n        return this._quantidade;\r\n    }\r\n\r\n    get valor() {\r\n        return this._valor;\r\n    }\r\n}"],"sourceRoot":""}