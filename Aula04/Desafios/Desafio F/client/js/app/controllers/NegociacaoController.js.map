{"version":3,"sources":["../../app-es2015/controllers/NegociacaoController.js"],"names":["NegociacaoController","$","document","querySelector","bind","_inputData","_inputQuantidade","_inputValor","_listaNegociacoes","ListaNegociacoes","_negociacoesView","NegociacoesView","update","_mensagem","Mensagem","_mensagemView","MensagemView","event","preventDefault","adiciona","_criaNegociacao","texto","_limpaFormulario","Negociacao","DateHelper","textoParaData","value","focus","esvazia","service","NegociacaoService","obterNegociacoes","then","negociacoes","forEach","negociacao","catch","erro"],"mappings":";;;;;;IAAMA,oB;AAEF,oCAAc;AAAA;;AAEV,YAAIC,IAAIC,SAASC,aAAT,CAAuBC,IAAvB,CAA4BF,QAA5B,CAAR;AACA,aAAKG,UAAL,GAAkBJ,EAAE,OAAF,CAAlB;AACA,aAAKK,gBAAL,GAAwBL,EAAE,aAAF,CAAxB;AACA,aAAKM,WAAL,GAAmBN,EAAE,QAAF,CAAnB;AACA,aAAKO,iBAAL,GAAyB,IAAIC,gBAAJ,EAAzB;;AAEA,aAAKC,gBAAL,GAAwB,IAAIC,eAAJ,CAAoBV,EAAE,kBAAF,CAApB,CAAxB;AACA,aAAKS,gBAAL,CAAsBE,MAAtB,CAA6B,KAAKJ,iBAAlC;;AAEA,aAAKK,SAAL,GAAiB,IAAIC,QAAJ,EAAjB;AACA,aAAKC,aAAL,GAAqB,IAAIC,YAAJ,CAAiBf,EAAE,eAAF,CAAjB,CAArB;AACA,aAAKc,aAAL,CAAmBH,MAAnB,CAA0B,KAAKC,SAA/B;AAEH;;;;iCAEQI,K,EAAO;;AAEZA,kBAAMC,cAAN;AACA,iBAAKV,iBAAL,CAAuBW,QAAvB,CAAgC,KAAKC,eAAL,EAAhC;AACA,iBAAKV,gBAAL,CAAsBE,MAAtB,CAA6B,KAAKJ,iBAAlC;;AAEA,iBAAKK,SAAL,CAAeQ,KAAf,GAAuB,mCAAvB;AACA,iBAAKN,aAAL,CAAmBH,MAAnB,CAA0B,KAAKC,SAA/B;;AAEA,iBAAKS,gBAAL;AACH;;;0CAEiB;;AAEd,mBAAO,IAAIC,UAAJ,CACHC,WAAWC,aAAX,CAAyB,KAAKpB,UAAL,CAAgBqB,KAAzC,CADG,EAEH,KAAKpB,gBAAL,CAAsBoB,KAFnB,EAGH,KAAKnB,WAAL,CAAiBmB,KAHd,CAAP;AAIH;;;2CAEkB;;AAEf,iBAAKrB,UAAL,CAAgBqB,KAAhB,GAAwB,EAAxB;AACA,iBAAKpB,gBAAL,CAAsBoB,KAAtB,GAA8B,CAA9B;AACA,iBAAKnB,WAAL,CAAiBmB,KAAjB,GAAyB,GAAzB;AACA,iBAAKrB,UAAL,CAAgBsB,KAAhB;AACH;;;gCAEO;AACJ,iBAAKnB,iBAAL,CAAuBoB,OAAvB;AACA,iBAAKlB,gBAAL,CAAsBE,MAAtB,CAA6B,KAAKJ,iBAAlC;AACA,iBAAKK,SAAL,CAAeQ,KAAf,GAAuB,kCAAvB;AACA,iBAAKN,aAAL,CAAmBH,MAAnB,CAA0B,KAAKC,SAA/B;AACH;;;6CAEoB;AAAA;;AACjB,gBAAIgB,UAAU,IAAIC,iBAAJ,EAAd;;AAEAD,oBAAQE,gBAAR,GACCC,IADD,CACM,uBAAe;AACjBC,4BACKC,OADL,CACa;AAAA,2BACL,MAAK1B,iBAAL,CAAuBW,QAAvB,CAAgCgB,UAAhC,CADK;AAAA,iBADb;;AAIA,sBAAKzB,gBAAL,CAAsBE,MAAtB,CAA6B,MAAKJ,iBAAlC;AACA,sBAAKK,SAAL,CAAeQ,KAAf,GAAuB,qCAAvB;AACA,sBAAKN,aAAL,CAAmBH,MAAnB,CAA0B,MAAKC,SAA/B;AACH,aATD,EAUKuB,KAVL,CAUW,gBAAQ;AACX,sBAAKvB,SAAL,CAAeQ,KAAf,GAAuBgB,IAAvB;AACA,sBAAKtB,aAAL,CAAmBH,MAAnB,CAA0B,MAAKC,SAA/B;AACA;AACH,aAdL;AAeH","file":"NegociacaoController.js","sourcesContent":["class NegociacaoController {\r\n\r\n    constructor() {\r\n\r\n        let $ = document.querySelector.bind(document);\r\n        this._inputData = $('#data');\r\n        this._inputQuantidade = $('#quantidade');\r\n        this._inputValor = $('#valor');\r\n        this._listaNegociacoes = new ListaNegociacoes();\r\n\r\n        this._negociacoesView = new NegociacoesView($('#negociacoesView'));\r\n        this._negociacoesView.update(this._listaNegociacoes);\r\n\r\n        this._mensagem = new Mensagem();\r\n        this._mensagemView = new MensagemView($('#mensagemView'));\r\n        this._mensagemView.update(this._mensagem);\r\n\r\n    }\r\n\r\n    adiciona(event) {\r\n\r\n        event.preventDefault();\r\n        this._listaNegociacoes.adiciona(this._criaNegociacao());\r\n        this._negociacoesView.update(this._listaNegociacoes);\r\n\r\n        this._mensagem.texto = 'Negociação adicionada com sucesso';\r\n        this._mensagemView.update(this._mensagem);\r\n\r\n        this._limpaFormulario();\r\n    }\r\n\r\n    _criaNegociacao() {\r\n\r\n        return new Negociacao(\r\n            DateHelper.textoParaData(this._inputData.value),\r\n            this._inputQuantidade.value,\r\n            this._inputValor.value);\r\n    }\r\n\r\n    _limpaFormulario() {\r\n\r\n        this._inputData.value = '';\r\n        this._inputQuantidade.value = 1;\r\n        this._inputValor.value = 1.0;\r\n        this._inputData.focus();\r\n    }\r\n\r\n    apaga() {\r\n        this._listaNegociacoes.esvazia();\r\n        this._negociacoesView.update(this._listaNegociacoes);\r\n        this._mensagem.texto = 'Negociações apagadas com sucesso';\r\n        this._mensagemView.update(this._mensagem);\r\n    }\r\n\r\n    importaNegociacoes() {\r\n        let service = new NegociacaoService();\r\n\r\n        service.obterNegociacoes()\r\n        .then(negociacoes => {\r\n            negociacoes\r\n                .forEach(negociacao =>\r\n                    this._listaNegociacoes.adiciona(negociacao));\r\n\r\n            this._negociacoesView.update(this._listaNegociacoes);\r\n            this._mensagem.texto = 'Negociações importadas com  sucesso';\r\n            this._mensagemView.update(this._mensagem);\r\n        })\r\n            .catch(erro => {\r\n                this._mensagem.texto = erro;\r\n                this._mensagemView.update(this._mensagem);\r\n                return;\r\n            });\r\n    }\r\n}"]}